---
sidebar_position: 3
---

# ğŸ› ï¸ Travaux pratique

## ğŸ§  Partie 1 â€” Comprendre la reprÃ©sentation dâ€™un robot sous ROSÂ 2

Un robot intÃ©grÃ© dans lâ€™Ã©cosystÃ¨me ROSÂ 2 est constituÃ© au minimum de deux Ã©lÃ©ments essentiels :

- ğŸ”§ Un descripteur URDF (Unified Robot Description Format) qui dÃ©crit la structure du robot (liens, joints, dimensionsâ€¦)
- ğŸ§  Un contrÃ´leur qui permet dâ€™interagir avec les capteurs et actionneurs du robot

### ğŸ” 1. Visualisation et comprÃ©hension du descripteur URDF

Pour gÃ©nÃ©rer et visualiser la structure du robot OpenMANIPULATOR-X, suivez les Ã©tapes suivantes :

#### ğŸ› ï¸ GÃ©nÃ©ration du fichier URDF

ğŸ’» Dans un terminal, exÃ©cutez :
```bash
ros2 run xacro xacro $HOME/ros2_ws/src/open_manipulator/open_manipulator_description/urdf/om_x/open_manipulator_x.urdf.xacro -o /tmp/open_manipulator_x.urdf
```

#### ğŸ“ˆ GÃ©nÃ©ration de la visualisation de lâ€™arbre URDF

Ensuite, convertissez le fichier en une reprÃ©sentation graphique :
```bash
urdf_to_graphiz /tmp/open_manipulator_x.urdf
```

Un fichier PDF sera gÃ©nÃ©rÃ© dans le rÃ©pertoire courant. Vous pouvez lâ€™ouvrir avec un visualiseur PDF :
```bash
evince open_manipulator_x.urdf.pdf
``` 

Cela vous permettra dâ€™observer lâ€™arbre des liens et des articulations du robot, utile pour comprendre la cinÃ©matique du bras.

### ğŸ¤– 2. Visualisation 3D du robot et de ses articulations

Pour visualiser un modÃ¨le interactif du robot dans RViz (ou dans un visualiseur 3D similaire), lancez le fichier suivant :

```bash
 ros2 launch open_manipulator_description model_x.launch.py 
```
Cette commande :
- ğŸ“¦ Charge la description URDF du robot
- ğŸ§© Initialise les nÅ“uds nÃ©cessaires Ã  la visualisation
- ğŸ–¼ï¸ Affiche le robot dans RViz
- ğŸ›ï¸ Permet de manipuler les joints du robot via des sliders ou par lâ€™envoi de messages ROS

#### ğŸ“¡ 2.a. Explorer les topics publiÃ©s par le robot

Ã€ lâ€™aide de la commande ros2 topic, explorez les communications du robot.
- Quel est le nom du topic qui publie lâ€™Ã©tat courant des articulations (positions, vitesses, efforts) ?
- Quel est le type du message transmis par ce topic ?
- Ã€ quelle frÃ©quence (en Hz) le robot met-il Ã  jour lâ€™Ã©tat de ses joints ?

#### ğŸ“ˆ 2.b. Tracer la courbe des positions des moteurs en temps rÃ©el

##### ğŸ”¹ Option 1 â€” Avec `rqt_plot`

Lancez lâ€™outil de visualisation graphique intÃ©grÃ© Ã  ROSÂ 2 :
```bash
ros2 run rqt_plot rqt_plot
```

Dans le champ de saisie, entrez le nom du topic que vous souhaitez tracer. Pour les positions articulaires, utilisez : 
`/joint_states/position[<indice_du_joint>]`

> ğŸ”¢ Lâ€™indice dÃ©pend de lâ€™ordre des joints dans le message JointState. Par exemple, si joint3 est le quatriÃ¨me Ã©lÃ©ment, utilisez position[3].

##### ğŸ”¹ Option 2 â€” Avec `PlotJuggler`

PlotJuggler offre une interface plus puissante et interactive. Pour lâ€™installer :
```bash
sudo apt install ros-jazzy-plotjuggler ros-jazzy-plotjuggler-ros
```
Ensuite :
1. Lancez PlotJuggler depuis votre terminal :
```bash
ros2 run plotjuggler plotjuggler
```
2. Dans lâ€™onglet **Streaming**, cliquez sur ROS Topic Subscriber et sÃ©lectionnez `/joint_states`, puis appuyez sur Start.

3. Faites glisser les positions des joints sur le graphique pour les visualiser en temps rÃ©el.

4. Bougez avec les sliders pour observer lâ€™Ã©volution des valeurs en temps rÃ©el.


### TODO : Divers.

Pour lancer le robot dans Gazebo, vous pouvez utiliser les commandes suivantes :
```bash
ros2 launch open_manipulator_bringup gazebo.launch.py #for om_x and om_y
``` 